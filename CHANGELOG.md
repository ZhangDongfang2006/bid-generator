# 更新日志 (CHANGELOG)

本文档记录 bid-generator 项目的所有重要更改。

格式遵循 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [未发布]

### 计划中
- [ ] 人员信息数据完善
- [ ] 多用户协作功能
- [ ] 自动化测试覆盖
- [ ] CI/CD 流水线设置

---

## [2.2.0] - 2026-02-24

### 新增 ✨
- **证书图片显示功能**
  - PDF 证书自动转换为图片（只转换第一页）
  - 图片自动插入到投标文件第3章（企业资质）
  - 图片分辨率 200dpi，打印效果清晰
  - 图片宽度 5.5 英寸，适合 A4 纸张

### 优化 🚀
- **资质匹配逻辑**
  - 原来只匹配第一个符合条件的证书
  - 现在返回所有有 PDF 的证书（最多20个）
  - 确保用户能看到所有证书图片

### 修复 🐛
- 修复 `show_cert_images` 参数未传递问题
- 修复临时图片文件过早删除问题
- 修复 pdf2image 参数错误（`first_page_only=True` → `first_page=1, last_page=1`）
- 修复类型不匹配问题（int vs str）
- 修复 Path 对象问题
- 修复 `p.add_paragraph()` 错误（10处）
- 修复 `cert[cert_no]` 语法错误（4处）
- 修复匹配逻辑问题（只匹配1个证书）

### 依赖 🔧
- 安装 `poppler`（pdf2image 依赖）
- 安装 `docx2python`（.doc 文件解析增强）

### 测试 ✅
- 创建 `test_all_certs.py` - 测试所有证书转换和插入
- 创建 `test_matching.py` - 测试资质匹配逻辑
- 创建 `test_real_flow.py` - 测试完整生成流程

---

## [2.1.0] - 2026-02-14

### 新增 ✨
- **.doc 文件解析**
  - 支持 Word 97-2003 格式（.doc）的招标文件
  - 自动转换为 .docx 格式进行处理

### 优化 🚀
- **证书图片转换**
  - 使用 Ghostscript 进行 PDF 转图片
  - 支持批量转换
  - 图片质量优化

### 修复 🐛
- 修复投标文件生成时的 "too many values to unpack" 错误
- 修复 "Expanders may not be nested inside other expanders" 错误
- 修复 IndentationError（意外缩进）
- 修复手动创建 XML 元素时的错误
- 修复前端渲染卡住问题（调试信息过多）

### 依赖 🔧
- 安装 `Ghostscript`（PDF 处理）
- 安装 `pdf2image` 和 `Pillow`

---

## [2.0.0] - 2026-02-12

### 新增 ✨
- **完整资料库**
  - 资质证书：11项（质量、环境、安全认证等）
  - 产品信息：15项（高低压开关柜、预制舱等）
  - 业绩案例：20项（覆盖14个行业，2019-2025年）

- **局域网启动脚本**
  - 支持多人共用模式
  - 一键启动局域网访问

- **详细文档**
  - 用户使用手册
  - 快速启动指南
  - 排错指南

### 优化 🚀
- 改进招标文件解析准确性
- 优化投标文件格式
- 提升系统稳定性

---

## [1.0.0] - 2026-02-11

### 新增 ✨
- **基础投标文件生成功能**
  - 支持PDF和Word格式招标文件解析
  - 自动匹配公司资质、案例、产品
  - 一键生成投标文件（Word格式）
  - 技术标和商务标分开生成

- **资料管理系统**
  - 资质证书管理
  - 项目案例管理
  - 产品信息管理
  - 人员信息管理

- **Web界面**
  - 基于 Streamlit 的友好界面
  - 资料管理界面
  - 文件上传界面
  - 投标文件生成界面

### 配置 🔧
- 公司信息配置
- 报价配置
- 数据目录结构设计

---

## 版本说明

### 版本号规则
- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 更新类型说明
- **新增**：新功能
- **优化**：现有功能的改进
- **修复**：问题修复
- **依赖**：依赖库变更
- **测试**：测试相关
- **配置**：配置相关

---

## [相关链接]

- 仓库地址：https://github.com/ZhangDongfang2006/bid-generator
- 问题反馈：[Issues](https://github.com/ZhangDongfang2006/bid-generator/issues)
